
{
  "entities": {
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a clothing item in the VedicVerse catalog.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the product entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the product."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the product."
        },
        "price": {
          "type": "number",
          "description": "Price of the product."
        },
        "sizes": {
          "type": "array",
          "description": "Available sizes for the product.",
          "items": {
            "type": "string"
          }
        },
        "colors": {
          "type": "array",
          "description": "Available colors for the product.",
          "items": {
            "type": "string"
          }
        },
        "images": {
          "type": "array",
          "description": "URLs of the product images.",
          "items": {
            "type": "object",
            "properties": {
              "url": {
                "type": "string",
                "format": "uri"
              }
            },
            "required": ["url"]
          }
        },
        "category": {
          "type": "string",
          "description": "Category of the product."
        },
        "garmentType": {
          "type": "string",
          "description": "Specific type of garment."
        },
        "launchDateStart": {
            "type": "string",
            "format": "date-time",
            "description": "The start date of the product launch window."
        },
        "launchDateEnd": {
            "type": "string",
            "format": "date-time",
            "description": "The end date of the product launch window."
        }
      },
      "required": [
        "name",
        "description",
        "price",
        "sizes",
        "colors",
        "images",
        "category",
        "garmentType"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user account.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "displayName": {
          "type": "string",
          "description": "User's display name."
        }
      },
      "required": [
        "id",
        "email",
        "displayName"
      ]
    },
    "LaunchSchedule": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LaunchSchedule",
      "type": "object",
      "description": "Represents a scheduled product launch.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the launch schedule entity."
        },
        "description": {
          "type": "string",
          "description": "Description of the launch schedule."
        },
        "accessCode": {
            "type": "string",
            "description": "The password required to access the upcoming drop."
        },
        "launchDateStart": {
            "type": "string",
            "format": "date-time",
            "description": "The start date of the launch window."
        },
        "launchDateEnd": {
            "type": "string",
            "format": "date-time",
            "description": "The end date of the launch window."
        }
      },
      "required": [
        "id",
        "description"
      ]
    },
    "HeroSection": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "HeroSection",
      "type": "object",
      "description": "Content for the homepage hero section.",
      "properties": {
        "badgeText": {
          "type": "string",
          "description": "Text for the small badge above the main title."
        },
        "title": {
          "type": "string",
          "description": "The main headline for the hero section."
        },
        "description": {
          "type": "string",
          "description": "The descriptive paragraph below the title."
        }
      },
      "required": ["badgeText", "title", "description"]
    }
  },
  "auth": {
    "providers": [
      "google.com"
    ],
    "authorizedDomains": [
      "6000-firebase-studio-1762930899824.cluster-y3k7ko3fang56qzieg3trwgyfg.cloudworkstations.dev"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/products/{productId}",
        "definition": {
          "entityName": "Product",
          "schema": {
            "$ref": "#/backend/entities/Product"
          },
          "description": "Stores product information.",
          "params": [
            {
              "name": "productId",
              "description": "The unique identifier of the product."
            }
          ]
        }
      },
      {
        "path": "/launchSchedules/{launchScheduleId}",
        "definition": {
          "entityName": "LaunchSchedule",
          "schema": {
            "$ref": "#/backend/entities/LaunchSchedule"
          },
          "description": "Stores launch schedule details, including access codes.",
          "params": [
            {
              "name": "launchScheduleId",
              "description": "The unique identifier for the launch schedule."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile information.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            }
          ]
        }
      },
      {
        "path": "/roles_admin/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Collection of admin users, existence of the document grants admin role.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the admin user."
            }
          ]
        }
      },
      {
        "path": "/siteSettings/{settingId}",
        "definition": {
          "entityName": "HeroSection",
          "schema": {
            "$ref": "#/backend/entities/HeroSection"
          },
          "description": "Stores general site settings, like hero content.",
          "params": [
            {
              "name": "settingId",
              "description": "The unique identifier for the setting document (e.g., 'hero')."
            }
          ]
        }
      }
    ],
    "reasoning": "This Firestore structure is designed to support VedicVerse's clothing brand application, focusing on product management, scheduled launches, and user authentication. It prioritizes authorization independence, clarity, and scalability.\n\n*   **Products Collection:** Stores product details. The `products` collection is flat and requires no authorization checks based on parent documents.\n*   **Launch Schedules Collection:**  Allows administrators to pre-define launch schedules, including access codes for password-protected drops.\n*   **Users Collection:** Stores user profiles.  Each user document is secured based on `request.auth.uid` matching the `userId`.\n*   **Admin Roles Collection:** Implements Database-Based Access Control (DBAC).  Presence in `/roles_admin/{uid}` grants admin privileges.\n*   **Site Settings Collection:** A singleton collection for global site content, like the homepage hero section, making it easily editable by an admin.\n\n**Authorization Independence:**\n\n*   The design avoids hierarchical authorization dependencies.\n\n**QAPs (Rules are not Filters):**\n\n*   The segregation of concerns into separate collections allows for more secure `list` operations. For example, listing products doesn't require filtering based on user roles; all products in the `products` collection are accessible (subject to other rules).\n\n**Future Considerations:**\n\n*   Consider adding a `status` field to the `Product` entity (e.g., `DRAFT`, `ACTIVE`, `INACTIVE`) for better state management and filtering."
  }
}
